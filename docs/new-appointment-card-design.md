# ุชุตููู ุจุทุงูุฉ ุงูููุนุฏ ุงูุฌุฏูุฏุฉ ูุน ูุธุงู ุงูุถููู

## ๐ **ููุฎุต ุงูุชุทููุฑ ุงูููุชูู**

ุชู ุชุทููุฑ ูุธุงู ุจุทุงูุฉ ุงูููุนุฏ ุงูุฌุฏูุฏุฉ ุจุงููุงูู ูุน ุฌููุน ุงููุชุทูุจุงุช ุงููุทููุจุฉ.

---

## ๐ฏ **ุงูููููุงุช ุงููุทูุฑุฉ**

### **1. ูููู ุงูุจุทุงูุฉ ุงูุฌุฏูุฏ**
- **ุงูููู:** `lib/widgets/appointment_card.dart`
- **ุงููุตู:** ูููู ุจุทุงูุฉ ููุนุฏ ูุชุทูุฑ ูุน ููุฏุฑ ุชูุงุนูู

### **2. ูููุฐุฌ ุงูุฏุนูุฉ**
- **ุงูููู:** `lib/models/invitation_model.dart`
- **ุงููุตู:** ูููุฐุฌ ุจูุงูุงุช ููุฏุนูุงุช ูุน ุชุญููู ุงูุญุงูุงุช

### **3. ุชุญุฏูุซ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ**
- **ุงูููู:** `lib/screens/home_screen.dart`
- **ุงูุชุญุฏูุซุงุช:** ุงุณุชุฎุฏุงู ุงูุจุทุงูุฉ ุงูุฌุฏูุฏุฉ ูุน ุฌูุจ ุงูุถููู ูุงูุฏุนูุงุช

---

## ๐๏ธ **ูููู ุงูุจุทุงูุฉ ุงูุฌุฏูุฏุฉ**

### **ุงูููุฏุฑ (ูู ุงููููู ุฅูู ุงููุณุงุฑ):**

#### **1. ูุจุณููุฉ ุงูุฎุตูุตูุฉ** ๐
- **ุงููููุน:** ุฃูุตู ุงููููู
- **ุงููุธููุฉ:** ุชุจุฏูู ุจูู ุงูุนุงู ูุงูุฎุงุต
- **ุงูุชูุงุนู:** ููุฑุฉ ูุงุญุฏุฉ ุจุฏูู popup
- **ุงูุชูุจูู:** ุจูุฑ SnackBar ููุชุฃููุฏ
- **ุงูุฃููุงู:**
  - ุนุงู: ุฎูููุฉ ุฎุถุฑุงุก ูุงุชุญุฉุ ูุต ุฃุฎุถุฑ ุฏุงูู
  - ุฎุงุต: ุฎูููุฉ ุจุฑุชูุงููุฉ ูุงุชุญุฉุ ูุต ุจุฑุชูุงูู ุฏุงูู

#### **2. ุตูุฑุฉ ุฃูู ุถูู ูุน ุงูุทูู ุงูุฏููุงูููู** ๐ค
- **ุงููููุน:** ูุณุท ุงูููุฏุฑ
- **ุงูุทูู ุงูุฏููุงูููู:**
  - ๐ **ุฑูุงุฏู:** `pending` - ูู ูุฑุฏ ุนูู ุงูุฏุนูุฉ
  - ๐ข **ุฃุฎุถุฑ:** `active` - ูุงูู ููุดุท ูู ุงูููุนุฏ (ุทูู ุฃุณูู + ุธู)
  - ๐ด **ุฃุญูุฑ:** `deleted` - ูุงูู ุซู ุญุฐู ุงูููุนุฏ
  - โช **ูุฎูู:** `cancelled` - ุฑูุถ ุงูุฏุนูุฉ (ุงูุตูุฑุฉ ูุงูุงุณู ูุฎููุงู)

#### **3. ูุจุณููุฉ ุงุณู ุงูุถูู** ๐
- **ุงููููุน:** ุจุฌุงูุจ ุงูุตูุฑุฉ
- **ุงูุชูููู ุญุณุจ ุงูุญุงูุฉ:**
  - ูุดุท: ุฎูููุฉ ุฎุถุฑุงุกุ ูุต ุฃุฎุถุฑุ ุฎุท ุนุฑูุถ
  - ูุญุฐูู: ุฎูููุฉ ุญูุฑุงุกุ ูุต ุฃุญูุฑ
  - ูุนูู: ุฎูููุฉ ุฑูุงุฏูุฉุ ูุต ุฑูุงุฏู
- **ุงูุฅุฎูุงุก:** ูุฎููุฉ ููููุบููู

#### **4. ุฒุฑ ุฅุถุงูุฉ ุงูุถููู** โ
- **ุงููููุน:** ุฃูุตู ุงููุณุงุฑ
- **ุงูุดูู:** ุฏุงุฆุฑุฉ ุฒุฑูุงุก ูุน ุนูุงูุฉ +
- **ุงููุธููุฉ:** ูุชุญ ุญูุงุฑ ุจุญุซ ุงูุถููู

---

## ๐ **ุญูุงุฑ ุงูุจุญุซ ุนู ุงูุถููู**

### **ุงูููููุงุช:**
1. **ุดุฑูุท ุงูุจุญุซ:** ุจุญุซ ุจุงูุงุณู ุฃู ุงุณู ุงููุณุชุฎุฏู
2. **ูุงุฆูุฉ ุงูุฃุตุฏูุงุก:** ูุน ุตูุฑ ูุฃุณูุงุก ุงููุณุชุฎุฏููู
3. **Checkbox:** ูุงุฎุชูุงุฑ/ุฅูุบุงุก ุงุฎุชูุงุฑ ุงูุถููู
4. **ุฃุฒุฑุงุฑ:** ุฅูุบุงุก ูุญูุธ ูุน ุนุฏุงุฏ ุงููุฎุชุงุฑูู

### **ุงููุตุฏุฑ:** ูุงุฆูุฉ ุงููุชุงุจุนูู ุงููุนุชูุฏูู ูู ุฌุฏูู `follows`

---

## ๐๏ธ **ูุงุนุฏุฉ ุงูุจูุงูุงุช**

### **ุฌุฏูู ุงูุฏุนูุงุช (`invitations`):**
```json
{
  "id": "ูุนุฑู ุงูุฏุนูุฉ",
  "appointment": "ูุนุฑู ุงูููุนุฏ",
  "guest": "ูุนุฑู ุงูุถูู",
  "status": "invited|accepted|rejected|deleted_after_accept",
  "privacy": "public|private",
  "respondedAt": "ุชุงุฑูุฎ ุงูุฑุฏ",
  "created": "ุชุงุฑูุฎ ุงูุฅูุดุงุก",
  "updated": "ุชุงุฑูุฎ ุงูุชุญุฏูุซ"
}
```

### **ุญุงูุงุช ุงูุฏุนูุฉ:**
- `invited` โ `pending` (ุทูู ุฑูุงุฏู)
- `accepted` โ `active` (ุทูู ุฃุฎุถุฑ)
- `rejected` โ `cancelled` (ูุฎูู)
- `deleted_after_accept` โ `deleted` (ุทูู ุฃุญูุฑ)

---

## โก **ุงููุธุงุฆู ุงูุชูุงุนููุฉ**

### **1. ุชุจุฏูู ุงูุฎุตูุตูุฉ:**
```dart
Future<void> _togglePrivacy() async {
  // ุชุญุฏูุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  await _authService.pb.collection('appointments').update(id, {
    'privacy': newPrivacy,
  });
  
  // ุฅุธูุงุฑ ุจูุฑ ุงูุชูุจูู
  ScaffoldMessenger.of(context).showSnackBar(/*...*/);
}
```

### **2. ุฅุถุงูุฉ/ุญุฐู ุงูุถููู:**
```dart
Future<void> _updateAppointmentGuests(String appointmentId, List<String> guestIds) async {
  // ุฅุถุงูุฉ ุฏุนูุงุช ุฌุฏูุฏุฉ
  // ุญุฐู ุฏุนูุงุช ูุญุฐููุฉ
  // ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช
}
```

### **3. ุฌูุจ ุงูุถููู ูุงูุฏุนูุงุช:**
```dart
Future<void> _loadGuestsAndInvitations(List<AppointmentModel> appointments) async {
  // ุฌูุจ ุงูุฏุนูุงุช ูุน expand ููุถููู
  // ุชุตููู ุงูุจูุงูุงุช ุญุณุจ ุงูููุนุฏ
}
```

---

## ๐จ **ุงูุชุตููู ุงูุจุตุฑู**

### **ุงูุฃููุงู:**
- **ุฃุฎุถุฑ:** ุงูุนุงูุ ุงููุดุทุ ุงูููุจูู
- **ุจุฑุชูุงูู:** ุงูุฎุงุตุ ุงููุนูู
- **ุฃุญูุฑ:** ุงููุญุฐููุ ุงูุฎุทุฃ
- **ุฑูุงุฏู:** ุงููุนููุ ุบูุฑ ุงููุญุฏุฏ
- **ุฃุฒุฑู:** ุงูุฅุถุงูุฉุ ุงูุชูุงุนู

### **ุงูุฃุดูุงู:**
- **ุงููุจุณููุงุช:** ุญูุงู ูุฏูุฑุฉ 12-15px
- **ุงูุตูุฑ:** ุฏุงุฆุฑูุฉ ูุน ุฃุทูุงู ููููุฉ
- **ุงูุจุทุงูุฉ:** ุญูุงู ูุฏูุฑุฉ 12px ูุน ุธู ุฎููู

### **ุงูุชูุงุนู:**
- **ุงููุจุณููุงุช:** ูุงุจูุฉ ููููุฑ ูุน ุชุบููุฑ ููุฑู
- **ุงูุฃุฒุฑุงุฑ:** ุฑุฏูุฏ ูุนู ุจุตุฑูุฉ ุนูุฏ ุงูููุฑ
- **ุงูุญูุงุฑุงุช:** ุงูุชูุงูุงุช ุณูุณุฉ

---

## ๐ฑ **ุงูุงุณุชุฎุฏุงู**

### **ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:**
```dart
AppointmentCard(
  appointment: appointment,
  guests: guests,
  invitations: invitations,
  onPrivacyChanged: (newPrivacy) => updatePrivacy(),
  onGuestsChanged: (guestIds) => updateGuests(),
)
```

### **ุงูุจูุงูุงุช ุงููุทููุจุฉ:**
1. **ุงูููุนุฏ:** `AppointmentModel`
2. **ุงูุถููู:** `List<UserModel>`
3. **ุงูุฏุนูุงุช:** `List<InvitationModel>`

---

## โ **ุงูููุฒุงุช ุงูููุชููุฉ**

- [x] ูุจุณููุฉ ุงูุฎุตูุตูุฉ ุงูุชูุงุนููุฉ
- [x] ูุธุงู ุงูุฃุทูุงู ุงูุฏููุงููููุฉ ููุถููู
- [x] ุฅุฎูุงุก ุงูุถููู ุงูููุบููู
- [x] ุฒุฑ ุฅุถุงูุฉ ุงูุถููู ูุน ุงูุจุญุซ
- [x] ุชุญุฏูุซ ููุฑู ููุจูุงูุงุช
- [x] ุจูุฑ ุงูุชูุจููุงุช
- [x] ุชูุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ุชุตููู ุนุตุฑู ููุชูุงุณู

---

## ๐ **ููุชุทุจูู ุงููุณุชูุจูู**

ูุฐุง ุงูุชุตููู ุฌุงูุฒ ููุชุทุจูู ูู ุฃูุงูู ุฃุฎุฑู ูู ุงูุชุทุจูู. ุฌููุน ุงูููููุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ููุชูุงููุฉ ูุน ุงููุธุงู ุงูุญุงูู.

**ุชุงุฑูุฎ ุงูุฅููุงู:** 2025-01-25
**ุงูุญุงูุฉ:** โ ููุชูู ููุฎุชุจุฑ
