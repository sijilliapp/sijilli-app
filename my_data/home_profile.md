# بناء الصفحة الرئيسية للمستخدم - البرومبت الكامل

## المتطلبات الأساسية

أريد بناء صفحة رئيسية للمستخدم في تطبيق Flutter بالترتيب التالي بالضبط:

## 1. صورة المستخدم (أعلى الصفحة)

### المواصفات:
- **حجم الصورة**: 140 بكسل
- **طوق حول الصورة**: سماكة 3 بكسل
- **فجوة بين الصورة والطوق**: 3 بكسل
- **الحجم الإجمالي**: 146 بكسل (140 + 6)

### ألوان الطوق المتغيرة:
- **رمادي**: الوضع الاعتيادي (Colors.grey.shade400)
- **أزرق**: عندما يكون عنده موعد أو أكثر في نفس اليوم (Color(0xFF2196F3))
- **أزرق مشع للخارج**: عند وجود موعد نشط (تأثير glow مع BoxShadow)

### معالجة الصورة:
- تحميل من PocketHost: `${pocketbaseUrl}/api/files/${collection}/${userId}/${filename}`
- تنظيف اسم الملف من الأقواس: `.replaceAll('[', '').replaceAll(']', '').replaceAll('"', '')`
- أيقونة افتراضية عند عدم وجود صورة: `Icons.person`
- مؤشر تحميل أثناء جلب الصورة
- معالجة الأخطاء مع fallback

## 2. رابط الحساب (أسفل الصورة مباشرة)

### المواصفات:
- **النص**: `sijilli.com/${user.username}`
- **حجم الخط**: 14 بكسل
- **نمط الخط**: مائل (FontStyle.italic)
- **اللون**: Colors.grey.shade600
- **رمز النسخ**: Icons.copy بحجم 14 بكسل
- **المسافة بين النص والرمز**: 4 بكسل
- **التوسيط**: Center مع Row(mainAxisSize: MainAxisSize.min)

### الوظيفة:
- عند الضغط: نسخ الرابط للحافظة (Clipboard.setData)
- عرض رسالة تأكيد خضراء: "تم نسخ الرابط: sijilli.com/username"

## 3. اسم المستخدم الظاهر (أسفل الرابط)

### المواصفات:
- **النص**: `user.name`
- **حجم الخط**: 20 بكسل
- **نمط الخط**: عريض (FontWeight.bold)
- **اللون**: Colors.black87
- **التوسيط**: Center
- **المسافة من الرابط**: 4 بكسل

## 4. السيرة الذاتية (أسفل الاسم)

### المواصفات:
- **النص**: `user.bio`
- **حجم الخط**: 14 بكسل صغير
- **اللون**: Colors.grey.shade500 (رمادي)
- **التوسيط**: textAlign: TextAlign.center
- **الحد الأقصى**: 3 أسطر مع overflow: TextOverflow.ellipsis
- **المسافات الجانبية**: 40 بكسل من كل جانب
- **المسافة من الاسم**: 8 بكسل

## 5. الأزرار (أسفل السيرة الذاتية)

### الزر الدائري (الروابط الشخصية):
- **الحجم**: 30x30 بكسل
- **الشكل**: دائري مثالي (BoxShape.circle)
- **الحدود**: Colors.grey.shade300 بسماكة 1 بكسل
- **الخلفية**: Colors.white
- **الأيقونة**: Icons.link بحجم 16 بكسل
- **الوظيفة**: عرض Bottom Sheet للروابط الشخصية

### كبسولة الأصدقاء:
- **الحجم**: 120x30 بكسل
- **الشكل**: كبسولة (BorderRadius.circular(15))
- **الحدود**: Colors.grey.shade300 بسماكة 1 بكسل
- **الخلفية**: Colors.white
- **النص**: "الأصدقاء" بحجم 14 بكسل
- **الوظيفة**: عرض Bottom Sheet لقائمة الأصدقاء

### ترتيب الأزرار:
- **التوسيط**: Center مع Row(mainAxisSize: MainAxisSize.min)
- **المسافة بين الزرين**: 6 بكسل
- **المسافة من السيرة**: 20 بكسل

## 6. النظام المرن للمساحات

### المتطلبات:
- استخدام Widget مرن `_buildUserInfoSection()` يتحقق من وجود البيانات
- إذا لم تكن هناك bio أو اسم: لا توجد فراغات غير ضرورية
- المسافات تظهر فقط عند وجود المحتوى
- استخدام `MainAxisSize.min` و شروط ذكية للمسافات

## 7. نظام Cache السريع

### المتطلبات:
- **Cache-First**: تحميل فوري من SharedPreferences
- **تحديث خلفي**: مزامنة مع PocketHost عند توفر الإنترنت
- **عمل بدون إنترنت**: عرض البيانات المحفوظة
- **دوال Cache**: `_loadAppointmentsFromCache()`, `_saveAppointmentsToCache()`

## 8. التصميم العام

### النمط:
- **تصميم مثل تيك توك**: كل شيء متوسط عمودياً
- **ألوان متسقة**: رمادي هادئ مع أزرق للتفاعلات
- **مسافات متوازنة**: لا فراغات غير ضرورية
- **تأثيرات اللمس**: InkWell مع BorderRadius مناسب

### الترتيب النهائي:
1. صورة المستخدم (مع الطوق المتغير)
2. رابط الحساب (مائل مع رمز النسخ)
3. اسم المستخدم (عريض)
4. السيرة الذاتية (رمادي صغير)
5. الأزرار (دائري + كبسولة متوسطة)
6. باقي محتوى الصفحة

## 9. الكود النظيف

### المتطلبات:
- إزالة كل السكراب والكود الميت
- دوال واضحة ومفهومة للصيانة
- لا توجد خيارات ملغاة أو بيانات سابقة
- استخدام `withValues` بدلاً من `withOpacity`
- imports فقط المطلوبة

## 10. معالجة الحالات

### الحالات المختلفة:
- **كل البيانات موجودة**: عرض كامل
- **بدون bio**: لا مسافة زائدة
- **فقط الرابط**: مسافات مناسبة
- **لا توجد بيانات**: مسافة صغيرة فقط
- **بدون إنترنت**: عمل كامل مع البيانات المحفوظة

هذا البرومبت ينتج الصفحة الرئيسية بالترتيب والمواصفات الدقيقة المطلوبة.
