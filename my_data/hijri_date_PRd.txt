برومبت منظومة التاريخ في تطبيق سجلي

1. التعريفات الأساسية
التاريخ الأساسي:
يختاره المستخدم إمّا هجري أو ميلادي.
يخزن في قاعدة البيانات كما هو (وثيقة ثابتة).
لا يتغير أبدًا حتى لو تم إدخال تصحيح للتاريخ الهجري.

2-التاريخ الثانوي  
يظهر للمعاينة فقط.
لا يُخزَّن في قاعدة البيانات.
يتم حسابه تلقائيًا من التاريخ الأساسي مع تطبيق التصحيح.

2. إدخال التاريخ
يتم عبر ثلاث قوائم منسدلة:
اليوم.
الشهر (اسم الشهر).
السنة.

3. التصحيح
التصحيح لا يمسّ التاريخ الأساسي أبدًا.
التصحيح يطبّق فقط على التاريخ الثانوي.
خيارات التصحيح: -2، -1، 0، +1، +2.
القواعد:
إذا كان الأساسي هجريًا:


الهجري الأساسي يبقى ثابتًا.
الميلادي الثانوي يتأثر بعكس إشارة التصحيح.
مثال: الأساسي = 2 صفر 1447، التصحيح +1 → الميلادي ينقص يومًا واحدًا.

إذا كان الأساسي ميلاديًا:
الميلادي الأساسي يبقى ثابتًا.
الهجري الثانوي يتأثر بنفس إشارة التصحيح.
مثال: الأساسي = 10 سبتمبر 2025، التصحيح -2 → الهجري ينقص يومين.

4. غرفة العمليات
غرفة العمليات هي المركز الوحيد للتحويل بين هجري ↔ ميلادي وتطبيق التصحيحات.
كل الشاشات (الإضافة، الوارد، القوائم، النشرات) تستدعي غرفة العمليات فقط.
لا يُكتب منطق التحويل أو التصحيح في أي شاشة منفردة.

5. ملكية التصحيح
التصحيح يخص صاحب الحساب فقط.
صفحتي الشخصية = بتصحيحي أنا دائمًا وأبدًا.
صفحة سامي = بتصحيح سامي.
 صفحة أحمد = بتصحيح أحمد.
 هذه حقيقة ثابتة مهما اختلف الرائي.
عند زيارة صفحة مستخدم آخر: التواريخ تظهر وفق تصحيحات صاحب الصفحة المزارة، لا وفق تصحيح الزائر.

6. موقع مؤشر التصحيح
مؤشر التصحيح يُخزن في قاعدة البيانات كإعداد مرتبط بالمستخدم.
عند عرض أي تاريخ:
يُقرأ التصحيح من قاعدة البيانات.
يُطبق محليًا عبر غرفة العمليات على التاريخ الثانوي.

7. الخلاصة
التاريخ الأساسي = وثيقة ثابتة لا تتغير.
التاريخ الثانوي = معاينة فقط، يخضع للتصحيح.
التصحيح: مرتبط بالمستخدم، ويظهر في كل صفحات حسابه.
كل صفحة شخصية = بتصحيح صاحبها دائمًا.
غرفة عمليات واحدة مركزية للتحويل والتصحيح.
مؤشر التصحيح محفوظ في قاعدة البيانات، وتطبّقه غرفة العمليات محليًا عند العرض
